(function(d){if(!d.mw){var c=function(a){this._options=d.extend({content:"",src:"",width:"auto",height:"auto",offset:50,theme:"",title:!0,closeContent:!0,closeDelay:0},a);this.id="";this.id="string"==typeof this._options.id&&""!=this._options.id?this._options.id:""+Math.round(1E6*Math.random())+"_"+(new Date).getTime();this._options.zIndex=0;this._options.closeDelay=parseFloat(this._options.closeDelay);if(isNaN(this._options.closeDelay)||0>this._options.closeDelay)this._options.closeDelay=0;this._loading=
this._opened=!1;this._element=d('<div class="mw mw_id_'+this.id+'" />').hide();"string"==typeof this._options.theme&&""!=this._options.theme&&this._element.addClass("mw_theme_"+this._options.theme);this._elementInner=d('<div class="mw__inner" />').appendTo(this._element);this._elementTitle=d('<div class="mw__title" />').appendTo(this._elementInner);this._elementClose=d('<div class="mw__close" />').appendTo(this._elementInner);this._elementContent=d('<div class="mw__content" />').appendTo(this._elementInner);
this._elementLoading=d('<div class="mw__loading" />').appendTo(this._elementInner);var b=this;this._elementClose.on("click.mw",function(){b.close()});this.title(this._options.title);this.closeContent(this._options.closeContent)};c.prototype.content=function(a){if("undefined"!=typeof a)this._options.content=a,this._opened&&this.load();else return this._options.content};c.prototype.src=function(a){if("undefined"!=typeof a)this._options.src=a,this._opened&&this.load();else return this._options.src};
c.prototype.title=function(a){if("undefined"!=typeof a)!1===a?this._elementTitle.hide():("string"==typeof a?this._elementTitle.html(a):a instanceof jQuery&&this._elementTitle.append(a),this._elementTitle.show());else return this._elementTitle};c.prototype.closeContent=function(a){if("undefined"!=typeof a)!1===a?this._elementClose.hide():("string"==typeof a?this._elementClose.html(a):a instanceof jQuery&&this._elementClose.append(a),this._elementClose.show());else return this._elementClose};c.prototype.zIndex=
function(a){if("undefined"!=typeof a)a=parseInt(a),isNaN(a)||(this._options.zIndex=a,this._element.css("z-index",a));else return this._options.zIndex};c.prototype.theme=function(){return this._options.theme};c.prototype.element=function(){return this._element};c.prototype.open=function(a,b){d.mw.open(this,a,b)};c.prototype._open=function(a,b){if(!this._opened){this._opened=!0;0==this._element.parent().length&&this._element.appendTo(d("body"));!1!==a&&null!==a&&this.load(a,!0,b);this._element.show();
var e=this;setTimeout(function(){e._element.addClass("mw_opened");e._element.trigger("open",[e,a])},1);this.update()}};c.prototype.close=function(){d.mw.close(this)};c.prototype._close=function(){if(this._opened){this._opened=!1;this._element.removeClass("mw_opened");var a=this;setTimeout(function(){a._element.hide();if(a._options.content instanceof jQuery){var b=d('.mw-placeholder[data-mw="'+this.id+'"]');0<b.length&&b.replaceWith(a._options.content)}a._element.trigger("close",[a])},1E3*this._options.closeDelay)}};
c.prototype.load=function(a,b,e){if("string"==typeof this._options.src&&""!=this._options.src){this.loading(!0);!0===b&&this._elementContent.empty();var c=this;this._elementContent.load(this._options.src,a,function(){c.loading(!1);c.update();d.isFunction(e)&&e.call(c)})}else"string"==typeof this._options.content?(this._elementContent.html(this._options.content),this.update(),this.loading(!1),d.isFunction(e)&&e.call(this)):this._options.content instanceof jQuery&&0==this._options.content.closest(".mw").length&&
(this._options.content.replaceWith('<div class="mw-placeholder" data-mw="'+this.id+'" />'),this._elementContent.empty().append(this._options.content),this.update(),this.loading(!1),d.isFunction(e)&&e.call(this))};c.prototype.loading=function(a){if(!0===a)this._loading=!0,this._elementLoading.show();else if(!1===a)this._loading=!1,this._elementLoading.hide();else return this._loading};c.prototype.opened=function(){return this._opened};c.prototype.update=function(){if(this._opened){if(d.isPlainObject(this._options.offset)){var a=
parseInt(this._options.offset.x);var b=parseInt(this._options.offset.y)}else a=b=parseInt(this._options.offset);if(isNaN(a)||0>a)a=0;if(isNaN(b)||0>b)b=0;this._element.css("width","");"auto"!=this._options.width&&this._element.css("width",this._options.width);var e=this._element.outerWidth();this._element.css("height","");if("auto"==this._options.height)if("fixed"==this._options.position){var c=Math.min(d(window).height()-2*b,this._element.outerHeight());this._element.css("height",c+"px")}else c=
this._element.outerHeight();else this._element.css("height",this._options.height),c=this._element.outerHeight();"fixed"==this._options.position?(e=(d(window).width()-e)/2,e<a&&(e=a),c=(d(window).height()-c)/2,c<b&&(c=b),this._element.css({position:"fixed",left:e+"px",top:c+"px"})):"auto"!=this._options.position&&(e=(d(window).width()-e)/2,e<a&&(e=a),c=d(window).scrollTop()+(d(window).height()-c)/2,c<b&&(c=b),this._element.css({position:"absolute",left:e+"px",top:c+"px"}));this._element.trigger("update",
[self])}};c.prototype.on=function(a,b){if("string"==typeof a&&d.isFunction(b))this._element.on(a,b);return this};c.prototype.off=function(a,b){"string"==typeof a&&this._element.off(a,b);return this};var f=function(){this._elementOverlay=d('<div class="mw-overlay" />');this._defaults=null;this._mw={};this._stack=[];this._zIndex=this._startZIndex=3E3;this._closeDisabled=!1;var a=this;this._elementOverlay.on("click.mw",function(){var b=a._stack.length;0<b&&a.close(a._stack[b-1])});d(window).on("resize.mw",
function(){var b;for(b in a._mw){var c=a._mw[b];c.opened()&&c.update()}})};f.prototype.defaults=function(a){d.isPlainObject(a)?this._defaults=d.extend({},a):this._defaults=null;return this};f.prototype.add=function(a){d.isPlainObject(a)&&(null!==this._defaults&&(a=d.extend(d.extend({},this._defaults),a)),a=new c(a));a instanceof c&&"string"==typeof a.id&&""!=a.id&&(this._mw.hasOwnProperty(a.id)||(this._mw[a.id]=a));return this};f.prototype.get=function(a,b){if("string"==typeof a&&""!=a)if(this._mw.hasOwnProperty(a))a=
this._mw[a];else{var e=d('[data-mw="'+a+'"]');0<e.length&&(this.add({id:a,content:e}),this._mw.hasOwnProperty(a)&&(a=this._mw[a]))}a instanceof c||(a=null);if("undefined"==typeof b)return a;null!==a&&d.isFunction(b)&&b.call(a.element(),a);return this};f.prototype.open=function(a,b,c,d){a=this.get(a);if(null===a||a.opened())return this;this._stack.push(a);this._showOverlay();a.zIndex(this._zIndex+1);a._open(b,c);this._zIndex+=2;if(!0===d&&(a=this._stack.length,1<a))for(;0<--a;)this.close(this._stack[0]);
return this};f.prototype.close=function(a){if(this._closeDisabled)return this;a=this.get(a);if(null===a||!a.opened())return this;for(var b=this._stack.length;-1<--b&&a!==this._stack[b];);a._close();if(-1<b&&(this._stack.splice(b,1),b=this._stack.length,0<b))return this._zIndex=this._stack[b-1].zIndex()-1,this._showOverlay(),this._zIndex+=2,this;this._zIndex=this._startZIndex;this._hideOverlay();return this};f.prototype.closeAll=function(){if(this._closeDisabled)return this;var a;for(a in this._mw){var b=
this._mw[a];b.opened()&&b._close()}this._stack.length=0;this._zIndex=this._startZIndex;this._hideOverlay();return this};f.prototype.disableClose=function(){this._closeDisabled=!0;return this};f.prototype.enableClose=function(){this._closeDisabled=!1;return this};f.prototype._showOverlay=function(){var a="",b=this._stack.length;0<b&&(a=this._stack[b-1].theme(),"string"==typeof a&&""!=a&&(a="mw-overlay_theme_"+a));""!=a?this._elementOverlay.hasClass(a)||this._elementOverlay.removeClass().addClass("mw-overlay "+
a):this._elementOverlay.removeClass().addClass("mw-overlay");0==this._elementOverlay.parent().length&&this._elementOverlay.appendTo(d("body"));this._elementOverlay.css("z-index",this._zIndex);this._elementOverlay.hasClass("mw-overlay__opened")?this._elementOverlay.show():this._elementOverlay.addClass("mw-overlay__opened").fadeIn()};f.prototype._hideOverlay=function(){this._elementOverlay.removeClass("mw-overlay__opened").fadeOut()};d.mw=new f}})(jQuery);
